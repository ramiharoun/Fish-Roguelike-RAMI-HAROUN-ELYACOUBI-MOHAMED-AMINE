<!DOCTYPE html>
<html>

<head>
    <title>Split Sprite Sheet</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }

        #status {
            margin: 20px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }

        canvas {
            border: 2px solid #333;
            margin: 10px;
            background: white;
        }

        .sprite-preview {
            display: inline-block;
            margin: 10px;
            text-align: center;
        }
    </style>
</head>

<body>
    <h1>Sprite Sheet Splitter</h1>
    <div id="status">Loading sprite sheet...</div>
    <div id="previews"></div>

    <script>
        const spriteNames = ['enemy', 'aggressive', 'fast', 'heavy', 'jellyfish', 'eel', 'elite'];
        let downloadedCount = 0;

        const img = new Image();
        img.crossOrigin = 'anonymous';

        img.onload = function () {
            document.getElementById('status').innerHTML =
                `<strong>Loaded!</strong> Image size: ${img.width}x${img.height}<br>` +
                `Splitting into ${spriteNames.length} sprites...<br>` +
                `Each sprite will be ${Math.floor(img.width / spriteNames.length)}x${img.height} pixels`;

            const spriteWidth = img.width / spriteNames.length;
            const spriteHeight = img.height;

            spriteNames.forEach((name, index) => {
                // Create canvas for each sprite
                const canvas = document.createElement('canvas');
                canvas.width = spriteWidth;
                canvas.height = spriteHeight;
                const ctx = canvas.getContext('2d');

                // Draw the portion of the sprite sheet
                ctx.drawImage(
                    img,
                    index * spriteWidth, 0,           // Source x, y
                    spriteWidth, spriteHeight,        // Source width, height
                    0, 0,                              // Dest x, y
                    spriteWidth, spriteHeight         // Dest width, height
                );

                // Create preview
                const preview = document.createElement('div');
                preview.className = 'sprite-preview';
                preview.innerHTML = `<div>${name}.png</div>`;
                preview.appendChild(canvas);
                document.getElementById('previews').appendChild(preview);

                // Auto-download after a delay
                setTimeout(() => {
                    canvas.toBlob(blob => {
                        const link = document.createElement('a');
                        link.download = name + '.png';
                        link.href = URL.createObjectURL(blob);
                        link.click();

                        downloadedCount++;
                        if (downloadedCount === spriteNames.length) {
                            document.getElementById('status').innerHTML +=
                                '<br><strong style="color: green;">âœ“ All sprites downloaded!</strong><br>' +
                                'Move the PNG files from your Downloads folder to the <code>assets</code> folder.';
                        }
                    }, 'image/png');
                }, (index + 1) * 500);
            });
        };

        img.onerror = function () {
            document.getElementById('status').innerHTML =
                '<strong style="color: red;">Error loading sprite sheet!</strong><br>' +
                'Make sure enemy_sprites.png is in the assets folder.';
        };

        // Load the sprite sheet
        img.src = 'assets/enemy_sprites.png';
    </script>
</body>

</html>